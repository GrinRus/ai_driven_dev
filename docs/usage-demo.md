# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `init-claude-workflow.sh`

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Claude Code workflow –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Gradle-–º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –í –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Ç–∞–ª–æ–≥ `demo-monorepo`, –Ω–æ —Ç–µ –∂–µ —à–∞–≥–∏ –ø—Ä–∏–º–µ–Ω–∏–º—ã –∫ –ª—é–±–æ–º—É Java/Kotlin –ø—Ä–æ–µ–∫—Ç—É.

## –¶–µ–ª—å —Å—Ü–µ–Ω–∞—Ä–∏—è
- —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —à–∞–±–ª–æ–Ω –≤—Å–µ–≥–æ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞;
- –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è;
- –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—ã–±–æ—Ä–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ —Ö—É–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `bash`, `git`, `python3`;
- Gradle wrapper (`./gradlew`) –≤ –∫–æ—Ä–Ω–µ –¥–µ–º–æ-–ø—Ä–æ–µ–∫—Ç–∞;
- —Å–∫—Ä–∏–ø—Ç `init-claude-workflow.sh` —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω —Ä—è–¥–æ–º —Å –ø—Ä–æ–µ–∫—Ç–æ–º –∏–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ URL;
- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: `ktlint` –∏–ª–∏ Spotless, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–∞–±–æ—Ç—É –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ –∑–∞–ø—É—Å–∫–∞

```text
demo-monorepo/
‚îú‚îÄ‚îÄ build.gradle.kts
‚îú‚îÄ‚îÄ settings.gradle.kts
‚îú‚îÄ‚îÄ gradle/
‚îÇ   ‚îî‚îÄ‚îÄ wrapper/‚Ä¶
‚îú‚îÄ‚îÄ service-checkout/
‚îÇ   ‚îú‚îÄ‚îÄ build.gradle.kts
‚îÇ   ‚îî‚îÄ‚îÄ src/main/kotlin/CheckoutService.kt
‚îî‚îÄ‚îÄ service-payments/
    ‚îú‚îÄ‚îÄ build.gradle.kts
    ‚îî‚îÄ‚îÄ src/main/kotlin/PaymentsService.kt
```

## –ü–æ—à–∞–≥–æ–≤—ã–π walkthrough

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
git clone git@github.com:your-org/demo-monorepo.git
cd demo-monorepo
cp ../init-claude-workflow.sh .
chmod +x init-claude-workflow.sh
```

> –°–æ–≤–µ—Ç: –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ —á–µ—Ä–µ–∑ `curl` –∏–ª–∏ `wget`. –î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å `curl`.

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
bash init-claude-workflow.sh \
  --commit-mode ticket-prefix \
  --enable-ci \
  --force
```

- `--commit-mode` –∑–∞–¥–∞—ë—Ç —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–º–∏—Ç–æ–≤;
- `--enable-ci` –¥–æ–±–∞–≤–ª—è–µ—Ç workflow GitHub Actions;
- `--force` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã (—É–¥–æ–±–Ω–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –Ω–∞ –¥–µ–º–æ).

–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è (—Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ):

```text
[INFO] Checking prerequisites: bash ‚úÖ python3 ‚úÖ gradle ‚úÖ
[INFO] Generating Claude Code structure‚Ä¶
[INFO] Installing git hooks to .claude/hooks
[INFO] Writing config/conventions.json (mode=ticket-prefix)
[INFO] CI workflow enabled ‚Üí .github/workflows/gradle.yml
[DONE] Claude Code workflow is ready to use üéâ
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ git-—Å—Ç–∞—Ç—É—Å –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

```bash
git status -sb
```

```text
## main
A  .claude/settings.json
A  .claude/hooks/format-and-test.sh
A  config/conventions.json
‚Ä¶
```

–ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ —Å–¥–µ–ª–∞–π—Ç–µ `git diff` –ø–æ –ª—é–±–æ–º—É —Ñ–∞–π–ª—É, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—ã–±–æ—Ä–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤—Ä—É—á–Ω—É—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
.claude/hooks/format-and-test.sh
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –æ–ø—Ä–µ–¥–µ–ª–∏–ª Gradle-–º–æ–¥—É–ª–∏ –∏ –∑–∞–ø—É—Å—Ç–∏–ª —Ç–µ—Å—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∏—Ö.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

```text
demo-monorepo/
‚îú‚îÄ‚îÄ .claude/
‚îÇ   ‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îú‚îÄ‚îÄ gradle/init-print-projects.gradle
‚îÇ   ‚îú‚îÄ‚îÄ hooks/{format-and-test.sh,protect-prod.sh}
‚îÇ   ‚îú‚îÄ‚îÄ settings.json
‚îÇ   ‚îî‚îÄ‚îÄ cache/project-dirs.txt
‚îú‚îÄ‚îÄ config/conventions.json
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ adr.template.md
‚îÇ   ‚îú‚îÄ‚îÄ prd.template.md
‚îÇ   ‚îî‚îÄ‚îÄ tasklist.template.md
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ branch_new.py
‚îÇ   ‚îú‚îÄ‚îÄ commit_msg.py
‚îÇ   ‚îî‚îÄ‚îÄ conventions_set.py
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îú‚îÄ‚îÄ ISSUE_TEMPLATE/
‚îÇ   ‚îú‚îÄ‚îÄ PULL_REQUEST_TEMPLATE.md
‚îÇ   ‚îî‚îÄ‚îÄ workflows/gradle.yml
‚îî‚îÄ‚îÄ README.md (–æ–±–Ω–æ–≤–ª—ë–Ω)
```

> –°–Ω–∏–º–æ–∫ ¬´–ø–æ—Å–ª–µ¬ª —É–¥–æ–±–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `tree -L 2` –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º IDE. –î–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π –¥–æ–±–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–æ/–ø–æ—Å–ª–µ –≤ `docs/images/`.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ Claude Code
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `/test-changed` ‚Äî —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫.
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ `/branch-new feature DEMO-1` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç –≤–µ—Ç–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `/feature-new checkout-discounts DEMO-1` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —à–∞–±–ª–æ–Ω—ã PRD/ADR/Tasklist –¥–æ–±–∞–≤–ª–µ–Ω—ã.
4. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª–∏—Ç–∏–∫ —Å–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç `/commit "DEMO-1: spike"` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º—É –∏–∑ `config/conventions.json`.

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- **–ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ —Ç–µ—Ä–ø–∏—Ç –Ω–µ—É–¥–∞—á—É:** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Gradle –¥–æ—Å—Ç—É–ø–µ–Ω –≤ PATH.
- **–¢–µ—Å—Ç—ã –Ω–µ —Å—Ç–∞—Ä—Ç—É—é—Ç:** —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `./gradlew` –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π (`chmod +x gradlew`) –∏ —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø—É—Å–∫.
- **–§–∞–π–ª—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:** –¥–æ–±–∞–≤—å—Ç–µ `--force`, –Ω–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git –∏–ª–∏ —Å–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é.
- **–ù—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ–≥–Ω–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É:** —Å–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã. –ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git diff`.

–¢–µ–ø–µ—Ä—å –¥–µ–º–æ-–ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å Claude Code workflow. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit`) –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
