============================= test session starts ==============================
platform darwin -- Python 3.10.8, pytest-8.4.2, pluggy-1.6.0
rootdir: /Users/griogrii_riabov/grigorii_projects/ai_driven_dev
configfile: pyproject.toml
plugins: asyncio-1.2.0, cov-7.0.0, anyio-4.10.0
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 462 items

tests/test_analyst_dialog.py ..............                              [  3%]
tests/test_bootstrap_e2e.py ..                                           [  3%]
tests/test_cli_paths.py ..                                               [  3%]
tests/test_cli_subcommands.py .                                          [  4%]
tests/test_context_expand.py ...                                         [  4%]
tests/test_context_gc.py ................................                [ 11%]
tests/test_context_pack.py ..                                            [ 12%]
tests/test_dag_export.py ..                                              [ 12%]
tests/test_diff_boundary_check.py ......                                 [ 13%]
tests/test_error_output.py ..                                            [ 14%]
tests/test_feature_ids_root.py ....                                      [ 15%]
tests/test_format_and_test.py ..........................                 [ 20%]
tests/test_gate_prd_review.py ............                               [ 23%]
tests/test_gate_qa.py ...............                                    [ 26%]
tests/test_gate_researcher.py ....                                       [ 27%]
tests/test_gate_tests_hook.py ...........                                [ 29%]
tests/test_gate_workflow.py .............................                [ 36%]
tests/test_gate_workflow_unit.py ...                                     [ 36%]
tests/test_hook_loop_mode.py .....                                       [ 37%]
tests/test_hook_rw_policy.py .........                                   [ 39%]
tests/test_hooklib_modes.py ...                                          [ 40%]
tests/test_implementer_prompt.py .                                       [ 40%]
tests/test_index_schema.py ....                                          [ 41%]
tests/test_init_aidd.py ....                                             [ 42%]
tests/test_init_hook_paths.py .                                          [ 42%]
tests/test_json_patch.py .                                               [ 42%]
tests/test_loop_pack.py ..............                                   [ 45%]
tests/test_loop_run.py ....                                              [ 46%]
tests/test_loop_semantics.py ..                                          [ 47%]
tests/test_loop_step.py ............                                     [ 49%]
tests/test_md_slice.py ....                                              [ 50%]
tests/test_output_contract.py .                                          [ 50%]
tests/test_plan_review_gate.py ....                                      [ 51%]
tests/test_planner_agent.py .                                            [ 51%]
tests/test_post_hook_paths.py .                                          [ 52%]
tests/test_prd_ready_check.py ...                                        [ 52%]
tests/test_prd_review_agent.py ......                                    [ 54%]
tests/test_preflight_prepare.py ...                                      [ 54%]
tests/test_progress.py ..                                                [ 55%]
tests/test_progress_template.py ..                                       [ 55%]
tests/test_prompt_lint.py ........                                       [ 57%]
tests/test_prompt_template_sync.py .                                     [ 57%]
tests/test_prompt_versioning.py ..                                       [ 58%]
tests/test_qa_agent.py ..................                                [ 61%]
tests/test_reports_pack.py .....................                         [ 66%]
tests/test_research_check.py .......                                     [ 67%]
tests/test_research_command.py ........                                  [ 69%]
tests/test_research_rlm_e2e.py .                                         [ 69%]
tests/test_researcher_context.py ...........                             [ 72%]
tests/test_resources.py ......                                           [ 73%]
tests/test_review_pack.py ......                                         [ 74%]
tests/test_review_report.py .                                            [ 75%]
tests/test_reviewer_tests_cli.py ..                                      [ 75%]
tests/test_rlm_finalize.py .                                             [ 75%]
tests/test_rlm_jsonl_compact.py .                                        [ 75%]
tests/test_rlm_links_build.py ...................                        [ 80%]
tests/test_rlm_manifest.py .                                             [ 80%]
tests/test_rlm_nodes_build.py ......                                     [ 81%]
tests/test_rlm_schema.py ..                                              [ 82%]
tests/test_rlm_slice.py .                                                [ 82%]
tests/test_rlm_targets.py ......                                         [ 83%]
tests/test_rlm_verify.py ..                                              [ 83%]
tests/test_rlm_wrappers.py .                                             [ 84%]
tests/test_runtime_tool_result.py ...                                    [ 84%]
tests/test_settings_policy.py ss                                         [ 85%]
tests/test_stage_preflight_wrappers.py ...                               [ 85%]
tests/test_stage_result.py ...............                               [ 89%]
tests/test_tasklist_check.py ..............                              [ 92%]
tests/test_tasklist_check_cache.py .                                     [ 92%]
tests/test_tasklist_normalize.py .....                                   [ 93%]
tests/test_tasks_derive.py ...............                               [ 96%]
tests/test_tests_log.py ....                                             [ 97%]
tests/test_upgrade_aidd_docs.py ..                                       [ 98%]
tests/test_wave93_validators.py ........                                 [ 99%]
tools/test_settings_defaults.py .                                        [100%]

=============================== warnings summary ===============================
tools/test_settings_defaults.py::test_settings_payload
  /opt/homebrew/lib/python3.10/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning: Test functions should return None, but tools/test_settings_defaults.py::test_settings_payload returned <class 'dict'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================== 460 passed, 2 skipped, 1 warning in 37.64s ==================
