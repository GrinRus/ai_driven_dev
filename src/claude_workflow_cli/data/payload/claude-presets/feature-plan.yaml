---
name: feature-plan
workflow_step: 3-plan
description: >
  Детализированный план реализации на основе PRD и дизайна.
variables:
  feature:
    prompt: "Slug активной фичи."
  design_path:
    prompt: >-
      Путь к дизайн-документу, если отличается от стандартного
      docs/design/{{feature}}.md.
    default: "docs/design/{{feature}}.md"
context:
  files:
    - workflow.md
    - "{{design_path}}"
    - docs/prd/{{feature}}.prd.md
    - docs/research/{{feature}}.md
    - docs/tasklist.template.md
    - docs/customization.md
  instructions:
    - >-
      Составь пошаговый план реализации фичи {{feature}}.
    - >-
      Определи зависимости, риски и контрольные точки.
    - >-
      Свяжи план с будущими задачами тасклиста и гейтами (API, DB, тесты).
    - >-
      Учти выводы Researcher: куда встраиваем изменения, что переиспользуем,
      какие долги и риски нужно закрыть.
output:
  path: docs/plan/{{feature}}.md
  format: markdown
  mode: overwrite
claude:
  mode: interact
  temperature: 0.2
  guardrails:
    - "Сверь план с существующими ограничениями дизайна и PRD."
    - "Добавь вопросы к продукту, если информации недостаточно."
