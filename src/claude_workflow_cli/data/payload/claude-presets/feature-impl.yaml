---
name: feature-impl
workflow_step: 4-implement
description: >-
  Подготовка итерационного плана реализации и контроль чеклистов
  во время работы над фичей.
variables:
  feature:
    prompt: "Slug активной фичи."
  tasklist_section:
    prompt: >-
      Имя секции в docs/tasklist/{{feature}}.md для обновления статусов.
    default: "{{feature}}"
context:
  files:
    - workflow.md
    - docs/prd/{{feature}}.prd.md
    - docs/design/{{feature}}.md
    - docs/plan/{{feature}}.md
    - docs/research/{{feature}}.md
    - docs/tasklist/{{feature}}.md
    - docs/customization.md
  instructions:
    - >-
      Сверь текущий статус фичи {{feature}} с планом и tasklist
      (docs/tasklist/{{feature}}.md).
    - >-
      Предложи разбивку работы на итерации и проверь критерии прохождения
      гейтов.
    - >-
      Сформируй блок обновлений для docs/tasklist/{{feature}}.md в секции
      {{tasklist_section}}.
    - >-
      Уточни, какие подсистемы затрагивает Researcher, и зафиксируй
      действия для повторного использования и закрытия рисков.
output:
  path: docs/tasklist/{{feature}}.md
  format: markdown
  mode: append
  anchor: "## {{tasklist_section}}"
claude:
  mode: interact
  temperature: 0.15
  guardrails:
    - "Сначала запланируй шаги, затем предложи изменения в коде и тестах."
    - "Запрашивай подтверждение пользователя перед изменениями в артефактах."
