---
description: {{DESCRIPTION}}
argument-hint: {{ARGUMENT_HINT}}
lang: {{LANG}}
prompt_version: {{PROMPT_VERSION}}
source_version: {{SOURCE_VERSION}}
allowed-tools: {{ALLOWED_TOOLS}}
model: inherit
---

## Контекст
Опишите назначение команды, связь с агентами и обязательные предварительные условия (активный ticket, готовые артефакты и т.д.).

## Входные артефакты
- Перечислите файлы/репорты, которые команда читает/обновляет (PRD, план, tasklist и т.п.).
- Отметьте, что делать при отсутствии входа (остановиться с BLOCKED, попросить запустить другую команду).

## Когда запускать
- Опишите стадии workflow, в которых команда применяется, и кто инициирует запуск.
- Уточните ограничения (например, только после `/review-prd` или при статусе READY).

## Автоматические хуки и переменные
- Перечислите хуки/гейты, запускаемые во время выполнения команды (`gate-*`, `.claude/hooks/format-and-test.sh`).
- Опишите переменные окружения, которыми можно управлять (`SKIP_AUTO_TESTS`, `FORMAT_ONLY`, `TEST_SCOPE`, кастомные флаги).

## Что редактируется
- Укажите файлы/директории, которые команда должна обновлять (например, `docs/tasklist/<ticket>.md`, `src/**`).
- Добавьте ссылки на шаблоны (`templates/prompt-agent.md`, `docs/prompt-playbook.md`) и требования к структуре правок.

## Пошаговый план
1. Распишите последовательность действий команды (вызов саб-агентов, запуск скриптов, обновление артефактов).
2. Добавьте проверки готовности (например, `claude-workflow progress --source ...`).
3. При необходимости предусмотрите ветки для ручных вмешательств.

## Fail-fast и вопросы
- Опишите ситуации, когда команда должна остановиться (нет PRD, отсутствует approved статус, не найден список задач).
- Укажите формат запросов к пользователю и требования к ответам.

## Ожидаемый вывод
- Укажите, какие файлы/разделы должны быть обновлены по завершении.
- Зафиксируйте требования к финальному сообщению (строка `Checkbox updated: ...`, статусы, перечисление закрытых пунктов).

## Примеры CLI
- Приведите пример вызова команды/скрипта (например, `/implement ABC-123` или `!bash -lc 'claude-workflow preset prompt-governance ...'`).
- Добавьте подсказки по аргументам и типовым ошибкам.
