# /test-changed

| Быстрый обзор | |
| --- | --- |
| Назначение | Запустить форматирование и выборочные Gradle-тесты по затронутым модулям. |
| Входные параметры | Нет |
| Побочные эффекты | Выполняет форматирование и тесты, может модифицировать файлы. |
| Команда | `/test-changed` |

## Описание
Команда анализирует diff, определяет затронутые Gradle-модули и запускает соответствующие тесты вместе с форматированием кода.

## Параметры
- Нет входных параметров.

## Примеры
```
/test-changed
```

## Побочные эффекты
- Запускает `.claude/hooks/format-and-test.sh`.
- Форматирует код (Spotless/ktlint и т. п.) и выполняет Gradle-тесты (`:module:test`, `:module:jvmTest`, `:testDebugUnitTest`).

## Типичные ошибки
- «Gradle not found» — добавьте `./gradlew` в репозиторий или установите Gradle.
- «No matching modules» — команда выполнит все тесты, если изменения глобальные (`settings.gradle`, `libs.versions.toml` и др.).
- Таймаут hook — при долгих тестах запустите `./gradlew test` вручную или увеличьте лимиты.

## Советы
- Установите `STRICT_TESTS=1`, чтобы команда завершалась ошибкой при любом падении тестов.
- Экспортируйте `SKIP_FORMAT=1`, если хотите пропустить форматирование.
